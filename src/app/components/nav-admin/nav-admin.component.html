<nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
  <a class="navbar-brand ps-3" routerLink="/admin-dashboard">Admin Dashboard</a>
  <form
    class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0"
  >
    <div class="input-group">
      <input
        class="form-control"
        type="text"
        placeholder="Search for..."
        aria-label="Search for..."
        aria-describedby="btnNavbarSearch"
      />
      <button class="btn btn-primary" id="btnNavbarSearch" type="button">
        <i class="fas fa-search"></i>
      </button>
    </div>
  </form>
  <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
    <li class="nav-item dropdown">
      <a
        class="nav-link dropdown-toggle"
        id="navbarDropdown"
        href="#"
        role="button"
        data-bs-toggle="dropdown"
        aria-expanded="false"
      >
      <img *ngIf="imagePreview" [src]="imagePreview" alt="Profile Image" 
           class="rounded-circle me-2" width="30" height="30"/>
      </a>
      <ul
        class="dropdown-menu dropdown-menu-end"
        aria-labelledby="navbarDropdown"
      >
      <li><a class="dropdown-item" (click)="openProfileModal()">Settings</a></li>

        <li><hr class="dropdown-divider" /></li>
        <li>
          <a class="dropdown-item" (click)="logout()" style="cursor: pointer"
            >Logout</a
          >
        </li>
      </ul>
    </li>
  </ul>
</nav>

<!-- Modal Update Profile -->
<div *ngIf="isProfileModalOpen" class="modal fade show d-block" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Edit Profile</h5>
        <button type="button" class="btn-close" (click)="closeProfileModal()"></button>
      </div>
      <div class="modal-body">
        <div class="container">
          <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
            <div class="text-center mb-3">
              <img *ngIf="imagePreview" [src]="imagePreview" alt="Profile Image" 
                   class="rounded-circle border shadow-sm" width="120" height="120">
              <div class="mt-2">
                <label class="btn btn-outline-primary btn-sm">
                  <i class="bi bi-upload"></i> Upload Photo
                  <input type="file" (change)="onFileSelected($event)" hidden>
                </label>
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">Nama</label>
              <input type="text" class="form-control" formControlName="nama" placeholder="Masukkan nama">
            </div>

            <div class="mb-3">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" formControlName="email" readonly>
            </div>

            <div class="mb-3">
              <label class="form-label">Usia</label>
              <input type="number" class="form-control" formControlName="usia" placeholder="Masukkan usia">
            </div>

            <div class="mb-3">
              <label class="form-label">New Password</label>
              <input type="password" class="form-control" formControlName="password" placeholder="Masukkan password baru">
            </div>

            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-primary"><i class="bi bi-save"></i> Save Changes</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Overlay untuk modal -->
<div *ngIf="isProfileModalOpen" class="modal-backdrop fade show" (click)="closeProfileModal()"></div>
